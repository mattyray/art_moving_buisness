<!-- Desktop Table Rows Only -->
{% for job in jobs %}
<tr class="job-row" data-job-id="{{ job.id }}">
  <td>{{ job.id }}</td>
  <td>{{ job.client.name }}</td>
  <td class="d-none d-lg-table-cell text-truncate" style="max-width:200px;">
    {{ job.job_description|truncatewords:8 }}
  </td>
  <td>
    <div class="d-flex flex-wrap gap-1">
      <a href="{% url 'workorder_detail' job.id %}" class="btn btn-sm btn-info">View</a>
      
      {% if section == 'pending' %}
        <a href="{% url 'workorder_edit' job.id %}" class="btn btn-sm btn-warning">Schedule</a>
        <form method="post" action="{% url 'mark_completed' job.id %}" class="d-inline">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-success">Complete</button>
        </form>
      
      {% elif section == 'scheduled' %}
        <a href="{% url 'workorder_edit' job.id %}" class="btn btn-sm btn-warning">Edit</a>
        <form method="post" action="{% url 'mark_completed' job.id %}" class="d-inline">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-success">Complete</button>
        </form>
      
      {% elif section == 'completed' %}
        <a href="{% url 'workorder_edit' job.id %}" class="btn btn-sm btn-warning">Edit</a>
        <a href="/invoices/create/?work_order={{ job.id }}" class="btn btn-sm btn-success">Invoice</a>
      
      {% elif section == 'invoiced' %}
        <a href="{% url 'workorder_edit' job.id %}" class="btn btn-sm btn-warning">Edit</a>
        {% if job.invoices.exists %}
          <a href="{% url 'invoice_detail' job.invoices.first.id %}" class="btn btn-sm btn-outline-success">Invoice</a>
        {% endif %}
      {% endif %}
    </div>
  </td>
</tr>
{% endfor %}